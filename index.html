<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>河狸家 Web 开发团队</title>
  <meta name="description" content="河狸家 Web 开发团队的履历">
  <meta name="keywords" content="河狸家,河狸家 Web 开发,工程师">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="white" />
  <meta name="format-detection" content="telephone=no, email=no" />
  <meta name="HandheldFriendly" content="true">
  <meta name="screen-orientation" content="portrait">
  <link rel="icon" href="https://img-ucdn-static.helijia.com/lego/uploads/user/images/original_b8e96e866a8997c97a9aef3d9c0cc8e3.png">
  <style>
    html {
      background: url(https://img-ucdn-static.helijia.com/lego/uploads/user/images/original_d808fef0da889f09742d3a074f356bc5.png) repeat;
      margin: 0;
      display: flex;
      align-items: center;
      padding: 1em;
      min-height: 100%;
    }

    body {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      color: #333;
      box-shadow: 0 0 15px 5px #0001;
      display: flex;
      font-family: Content-font, Roboto, sans-serif;
      font-size: 16px;
      line-height: 1.625;
    }

    p {
      line-height: 1.2;
    }

    q {
      background: #e5e5e5;
      font-style: italic;
      line-height: 3;
      display: block;
    }

    a {
      color: inherit;
    }

    aside {
      background: #dfdfe1;
      padding: 0 1em 1em 3em;
      font-size: 95%;
      color: #666;
    }

    aside > section {
    }

    h1 {
      text-transform: uppercase;
      font-weight: normal;
    }

    h3 {
      margin-top: 0.3em;
      margin-bottom: 0;
      font-size: 100%;
    }

    ul {
      padding: 0;
      list-style-type: none;
    }

    li {
    }

    section {
      margin-bottom: 5em;
    }

    section > h1 {
      color: #333;
      border-top: 1px solid currentColor;
      border-bottom: 1px solid currentColor;
      text-indent: 0.3em;
      line-height: 1.8;
      letter-spacing: .5em;
    }

    main {
      width: 80%;
      padding: 3em 3em 1em 2em;
    }

    address {
      font-style: normal;
      font-size: 90%;
    }

    .icon {
       width: 1em; height: 1em;
       vertical-align: -0.15em;
       fill: currentColor;
       overflow: hidden;
    }

    #brand {
      background-color: #fff;
      margin: 0 -1em 2em -3em;
      padding: 1em 1em 1em 3em;
      text-align: center;
    }

    #brand img {
      width: 50%;
      height: auto;
    }

    #brand h1 {
      margin: 0;
      text-transform: none;
      text-align: center;
    }

    #info ul li {
      padding-left: 4em;
      position: relative;
      margin-bottom: 1em;
    }

    #info ul li .icon {
      position: absolute;
      width: 2em;
      height: 2em;
      left: 2em;
      top: 0.5em;
      transform: translate(-50%);
    }

    #skills td:first-child {
      text-align: right;
      font-weight: bold;
    }

    #stacks ul {
      list-style-type: circle;
      padding-left: 2em;
    }

    #profile h1 {
      border: none;
      background-color: #dfdfe1;
    }

    #key-projects dl {
      margin-left: 5em;
      position: relative;
    }

    #key-projects dl::before {
      content: '';
      position: absolute;
      width: 1px;
      top: 1em;
      left: 0;
      height: 100%;
      border-left: 1px solid currentColor;
    }

    #key-projects dl time {
      position: absolute;
      left: -2em;
      top: 0;
      transform: translate(-100%);
      font-weight: normal;
      font-size: 90%;
      text-align: center;
      line-height: 2;
    }

    #key-projects dl dd {
      margin-left: 1em;
      margin-bottom: 5em;
    }

    #key-projects dl dt {
      margin-left: 1em;
      font-weight: bold;
      position: relative;
    }

    #key-projects dl dt::before {
      content: '';
      position: absolute;
      display: block;
      width: 8px;
      height: 8px;
      background-color: currentColor;
      border-radius: 50%;
      top: 50%;
      left: -1em;
      transform: translate(-50%, -50%);
    }

    @media (max-width: 600px) {
      html {
        padding: 0;
      }

      body {
        display: block;
      }

      main {
        width: auto;
        padding-right: 2em;
      }

      #brand {
        padding-left: 1em;
      }

      #key-projects dl {
        margin-left: 3em;
      }
    }

    @media print {
      html {
        background: none;
        padding: 0;
        margin: 0;
      }

      body {
        max-width: none;
        box-shadow: none;
      }
    }

  </style>
</head>
<body>
  <aside>
    <div id="brand">
      <img src="https://img-ucdn-static.helijia.com/lego/uploads/user/images/original_b8e96e866a8997c97a9aef3d9c0cc8e3.png" width="150" height="150" />
      <h1>Helijia Web Team</h1>
    </div>

    <section id="info">
      <h1>Info</h1>
      <ul>
        <li class="home">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-importantdevices"></use>
          </svg>
          <h3>首页</h3>
          <a href="https://helijia.cn/web">https://helijia.cn/web</a>
        </li>
        <li class="addr">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-place"></use>
          </svg>
          <h3>地址</h3>
          <address>北京 - 朝阳区 - 三元桥 </address>
          <address>杭州 - 余杭区 - 溪望路</address>
        </li>
        <li>
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-email"></use>
          </svg>
          <h3>联系方式</h3>
          <a href="mailto:wuliu@helijia.com">wuliu@helijia.com</a>
        </li>
        <li>
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-web"></use>
          </svg>
          <h3>网站</h3>
          <a href="https://www.helijia.com">https://www.helijia.com</a>
        </li>
      </ul>
    </section>

    <section id="skills">
      <h1>Skills</h1>
      <table id="skills-list">
        <tbody>
          <tr>
            <td>JavaScript</td>
            <td>重点技能, 全员精通</td>
          </tr>
          <tr>
            <td>HTML</td>
            <td>基础技能, 全员精通</td>
          </tr>
          <tr>
            <td>CSS</td>
            <td>基础技能, 全员精通</td>
          </tr>
          <tr>
            <td>Elixir</td>
            <td>高级技能</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="stacks">
      <h1>Stacks</h1>
      <h3>Client Side</h3>
      <ul>
        <li><a href="https://babeljs.io/">Babel</a></li>
        <li><a href="https://webpack.js.org/">Webpack 4</a></li>
        <li><a href="https://reactjs.org/">React 16</a></li>
        <li><a href="https://redux.js.org/">Redux</a></li>
        <li><a href="https://ant.design/">Antd</a> / <a href="https://dvajs.com/">DvaJS</a> / <a href="https://umijs.org/">UmiJS</a></li>
        <li><a href="https://eslint.org/">ESLint</a></li>
        <li><a href="https://jestjs.io/">Jest</a></li>
      </ul>

      <h3>Server Side</h3>
      <ul>
        <li><a href="https://elixir-lang.org/">Elixir 1.8</a></li>
        <li><a href="https://phoenixframework.org/">Phoenix 1.4</a></li>
        <li><a href="https://github.com/elixir-maru/maru">Maru</a></li>
        <li><a href="https://www.postgresql.org/">PostgreSQL 10</a></li>
        <li><a href="https://github.com/rrrene/credo">Credo</a></li>
        <li><a href="https://github.com/parroty/excoveralls">Excoveralls</a></li>
      </ul>

      <h3>Tool chain</h3>
      <ul>
        <li><a href="https://about.gitlab.com/">Gitlab CE</a></li>
        <li><a href="https://kubernetes.io/">Kubernetes 1.9</a></li>
        <li><a href="https://www.docker.com/">Docker 18</a></li>
        <li><a href="https://git-scm.com/">Git</a></li>
        <li>Gira</li>
        <li><a href="https://www.iconfont.cn/">Iconfont.cn</a></li>
      </ul>
    </section>

  </aside>

  <main>
    <section id="profile">
      <h1>Profile</h1>
      <p>河狸家是一家互联网美业服务平台。背后依托大量经过严苛认证、技能精湛的「手艺人」，致力于向数千万的中产家庭提供质优价廉的服务。</p>
      <p>我们是河狸家的 Web 技术团队。只要是 Web 相关的业务，无论页面运行于浏览器、小程序、原生 App、PC 环境; 无论是简单的活动页面，还是复杂的产品交互; 无论是纯前端，还是前后端混合的整体应用，我们都会持续高效地交付高质量的产品。</p>
      <p>我们的愿景是成为中国顶尖的 Web 开发团队，并且正在持续为这个目标努力着。</p>
    </section>

    <section id="key-projects">
      <h1>Key Projects</h1>

      <dl>
        <dt>`Lego` - 乐高<time>2016 <br>|<br> now</time></dt>
        
        <dd>
          <p style="background: #000"><img src="https://img-ucdn-static.helijia.com/lego/uploads/user/images/original_2e86d7fc08b3540358c84052b7ee357b.png" width="100%"></p>
          <p>这支新的 Web 开发团队面临的第一个大挑战是如何完成日渐增多的活动页面开发需求。</p>
          <p>河狸家是一家跨类目的美业服务平台，有大量的促销场景。落到 Web 开发层面，我们需要开发大量的活动页面，这部分工作占到当时前端所有工作的 60% 左右，需要长期投入至少 2 名开发工程师。活动页面往往是一次性的，这不仅浪费了开发资源，也让工程师无法有产品归属感。我们需要找到高效的方式, 将团队从一次性活动开发的工作中解脱出来。</p>
          <p>在这样的情况下，我们启动了乐高项目。
            <ol>
              <li>第一步将历史活动进行梳理，整理出常见的模块，通过组件化开发提升效率；</li>
              <li>第二步开发一个系统，结合第一步的组件化，可以在线将模块进行组合，「搭」出页面，赋能需求方。</li>
            </ol>
          </p>
            <p>经过一个月的开发，我们成功上线了「乐高」系统。这个系统至今仍然在发挥着巨大的作用，已经累计帮助运营产生了数千个活动页面，节省了近万天的开发资源，也进一步改变了我们的开发模式：从直接面向业务，转变为开发组件，以组件化、工程化的方式赋能业务。</p>

          <p>在河狸家 Web 团队，我们极为重视开发工程师的时间和效率。标配是 Macbook Pro, 大显示器。我们尽可能少地开团队内部的会议，没有周报（但是会提供场合 show 自己的产出）。</p>

          <q>「我准备把乐高开源」—— 杜松 </q>
        </dd>

        <dt>
        `Mobile v3` - M 站 (m.helijia.com)
        <time>2016 <br>|<br> now</time>
        </dt>
        <dd>
        早期(在 Web 团队正式成立前) 河狸家只有一些简单的 mobile 页面，这些页面存在的问题有：
        <ol>
          <li>没有做性能优化, 性能较差</li>
          <li>打包流程是手动的，打包后的文件也存入版本控制，导致开发者之间冲突频繁</li>
          <li>组件化程度比较低, 开发效率低</li>
        </ol>
        <p>
        因此我们启动了 <code>mobile-v3</code> 项目，重写了 mobile 站，新站域名: m.helijia.com。我们做了很多优化:
        </p>
        <ol>
          <li>采用 Webpack 打包，将资源做 hash 化处理，并统一分发到 CDN</li>
          <li>建立 Git 分支和环境的映射关系，分支即环境。结合 Gitlab Pipeline 机制，实现持续集成、持续发布。</li>
          <li>引入 React，以函数式、组件化的方式进行开发，大大提升了开发效率</li>
          <li>建立内部 NPM 仓库，沉淀基础 ui 库、业务组件库、各类 util 库</li>
          <li>强制 code review，所有需求必须 100% 经过 review 才能上线</li>
        </ol>

        <p>项目很顺利，我们用了一个多月完成了第一版的 M 站。但这只是一个开始，我们不断完善基础设施，升级 babel、Webpack 等主要依赖库，不断抽取公共组件，不断优化开发流程。这个过程至今仍在继续。</p>
        <p>我们之所以如此大费周章，是因为我们认为：持续使用的软件必定需要持续的维护，拉长时间来看，长期的维护成本远远大于初期的开发成本。因此我们尽一切手段降低长期维护成本。</p>
        </dd>

        <dt>
          `Quests` - 成长游戏
          <time>2017 <br>|<br> now</time>
        </dt>
        <dd>
        <p><img src="https://img-ucdn-static.helijia.com/lego/uploads/user/images/original_43e4c19c538ae39e2d624df48ffe8846.jpg" width="100%"></p>
        <p>和很多创业公司一样，我们团队有很多实习生、应届生，在我们团队中，90后占了一半。如何快速、有效提升大家的编程水平？是否有一种机制让编程技能能稳定提升，直到一个人成为 Web 编程的专家?</p>

        <p>我们认为：是的，编程也是一种技能。技能的成长符合 <a href="https://en.wikipedia.org/wiki/Dreyfus_model_of_skill_acquisition">Dreyfus 模型</a>。处于技能不同阶段的人有不同的思维模式，也有对应的提升方向。除了知识和技巧的积累，更重要的是专家级的思维方式 —— 像专家程序员一样思考。</p>
        <p>我们启动了「成长游戏」计划，将 Dreyfus 技能模型和刻意练习、游戏化结合，设计了一套成长游戏机制。简单来说，就是:
          <ol>
            <li>将知识体系进行整理，取出一些点，设计成一个任务，解决一道题目</li>
            <li>玩家（团队成员）抽空完成题目。题目有不同难度，对应不同的时间，一般不超过 1 天。</li>
            <li>玩家交任务给导师（团队中的专家级程序员），导师 review 任务完成情况。</li>
            <li>根据大家的完成情况，进行打分、排名、奖励。进行下一轮游戏。</li>
          </ol>
        </p>
        <small>部分成长游戏的笔记可以在 <a href="https://github.com/helijia-web/quests">这里</a> 看到</small>

        <p>这套游戏的精髓在于导师 review 环节。通过和专家的思维模式进行对比，新人逐渐养成了同样的思维习惯。</p>

        <p>通过成长游戏，团队的新人从系统化的任务学习中受益匪浅，进步很快。优秀新人轮番涌现。在河狸家入职一周年的新人，都能独当一面。</p>
        <q>…… —— 落葵</q>
        </dd>

        <dt>
          `Skylab` - 上云
          <time>2019</time>
        </dt>
        <dd>
        <p><img src="https://img-ucdn-static.helijia.com/lego/uploads/user/images/original_2ba07a1f7038615935de3772d53c9349.png" width="100%"></p>
        <p>我们自 2016 年开始，在生产环境中使用 Elixir 开发后端和前后端混合型应用，逐渐沉淀了近 20 个 Elixir 应用。</p>
        <p>Elixir 是一个较新的语言，生态发展很快，所以三年间，我们的很多应用都已经落后最新的技术一圈了。比如一些应用无法在 Elixir 1.8 环境下运行。</p>
        <p>同时我们普遍采用 Edeliver + Distillery 的方式，在本地用脚本发布应用到生产环境。这样发布就难以被记录和追踪。随着全栈工程师人数的增加，这个问题逐渐暴露了出来。</p>
        <p>既然我们在 <code>mobile-v3</code> 中已经实现了「分支即环境」，而且运作得很好，我们是否能在 Elixir 项目中应用这个方式？</p>
        <p>答案是：yes! </p>
        <p>现在我们的开发流程是这样的:</p>
        <ol>
          <li>开发者基本上只需要写代码，不用关心部署的事情，部署到某个环境，只需要将代码合并到对应的 git 分支即可</li>
          <li>有一些分支是被保护的，不能随意合并代码进去。需要提 Merge Request，经过 review 后才能被合并进去。这保证了我们的代码都是经过 review 的。</li>
          <li>整体基于 docker 和 kubernetes，非常云友好，打包等都很容易，而且一致性比较好。</li>
        </ol>
        <p>经过优化后，现在我们的发布流程在 5 ~ 10 分钟左右, 所有人都很开心。</p>
        <p>上面说了我们有将近 20 个应用，所有应用都改造一遍成本巨大。好在我们做了一个 hex 包 —— skylab, 应用接入这套发布流程，只需要 5 分钟。</p>
        <q>Skylab 将会开源 —— 五柳</q>
        </dd>
      </dl>
    </section>

    <section id="members">
      <h1>成员</h1>
    </section>
  </main>

  <script src="https://at.alicdn.com/t/font_1272505_ks4qwjfrbvh.js"></script>
</body>
</html>
